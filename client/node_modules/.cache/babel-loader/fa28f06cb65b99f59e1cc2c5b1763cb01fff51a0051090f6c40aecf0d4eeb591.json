{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{useAuth}from\"../context/AuthContext\";import{Link}from\"react-router-dom\";import styles from\"../styles/Admin.module.css\";// Importando CSS modular\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{var _stats$users,_stats$users2,_stats$posts,_stats$posts2,_stats$comments;const{user}=useAuth();const[stats,setStats]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{fetchDashboardStats();},[]);const fetchDashboardStats=async()=>{try{const token=localStorage.getItem(\"token\");const response=await fetch(\"http://localhost:5000/api/admin/dashboard/stats\",{headers:{Authorization:`Bearer ${token}`}});if(response.ok){const data=await response.json();setStats(data);}else{const errorText=await response.text();console.error(\"Error en la respuesta:\",errorText);}}catch(error){console.error(\"Error fetching stats:\",error);}finally{setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:styles[\"admin-loading\"],children:\"Cargando dashboard...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles[\"admin-dashboard\"],children:[/*#__PURE__*/_jsxs(\"div\",{className:styles[\"admin-header\"],children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Panel de Administraci\\xF3n\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Bienvenido, \",(user===null||user===void 0?void 0:user.username)||\"Admin\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"stats-grid\"],children:[/*#__PURE__*/_jsxs(\"div\",{className:styles[\"stat-card\"],children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Usuarios Totales\"}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"stat-number\"],children:(stats===null||stats===void 0?void 0:(_stats$users=stats.users)===null||_stats$users===void 0?void 0:_stats$users.total_users)||0}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"stat-subtitle\"],children:[\"+\",(stats===null||stats===void 0?void 0:(_stats$users2=stats.users)===null||_stats$users2===void 0?void 0:_stats$users2.new_users_month)||0,\" este mes\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"stat-card\"],children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Publicaciones Totales\"}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"stat-number\"],children:(stats===null||stats===void 0?void 0:(_stats$posts=stats.posts)===null||_stats$posts===void 0?void 0:_stats$posts.total_posts)||0}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"stat-subtitle\"],children:[\"+\",(stats===null||stats===void 0?void 0:(_stats$posts2=stats.posts)===null||_stats$posts2===void 0?void 0:_stats$posts2.new_posts_month)||0,\" este mes\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"stat-card\"],children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Comentarios Totales\"}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"stat-number\"],children:(stats===null||stats===void 0?void 0:(_stats$comments=stats.comments)===null||_stats$comments===void 0?void 0:_stats$comments.total_comments)||0}),/*#__PURE__*/_jsx(\"div\",{className:styles[\"stat-subtitle\"],children:\"Total en la plataforma\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"admin-actions\"],children:[/*#__PURE__*/_jsxs(\"div\",{className:styles[\"action-card\"],children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Gesti\\xF3n de Usuarios\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Administrar usuarios y eliminar cuentas\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/users\",className:styles[\"admin-btn\"],children:\"Gestionar Usuarios\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"action-card\"],children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Gesti\\xF3n de Publicaciones\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Moderar y eliminar publicaciones\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/posts\",className:styles[\"admin-btn\"],children:\"Gestionar Posts\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"action-card\"],children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Gesti\\xF3n de Comentarios\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Moderar y eliminar comentarios\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/comments\",className:styles[\"admin-btn\"],children:\"Gestionar Comentarios\"})]})]})]});};export default AdminDashboard;","map":{"version":3,"names":["useState","useEffect","useAuth","Link","styles","jsx","_jsx","jsxs","_jsxs","AdminDashboard","_stats$users","_stats$users2","_stats$posts","_stats$posts2","_stats$comments","user","stats","setStats","loading","setLoading","fetchDashboardStats","token","localStorage","getItem","response","fetch","headers","Authorization","ok","data","json","errorText","text","console","error","className","children","username","users","total_users","new_users_month","posts","total_posts","new_posts_month","comments","total_comments","to"],"sources":["C:/Users/34615/Desktop/TFC_sys/ProyectoFinal_sys/client/src/pages/AdminDashboard.jsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { useAuth } from \"../context/AuthContext\"\r\nimport { Link } from \"react-router-dom\"\r\nimport styles from \"../styles/Admin.module.css\"  // Importando CSS modular\r\n\r\nconst AdminDashboard = () => {\r\n  const { user } = useAuth()\r\n  const [stats, setStats] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    fetchDashboardStats()\r\n  }, [])\r\n\r\n  const fetchDashboardStats = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\")\r\n      const response = await fetch(\"http://localhost:5000/api/admin/dashboard/stats\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n      })\r\n\r\n      if (response.ok) {\r\n        const data = await response.json()\r\n        setStats(data)\r\n      } else {\r\n        const errorText = await response.text()\r\n        console.error(\"Error en la respuesta:\", errorText)\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching stats:\", error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className={styles[\"admin-loading\"]}>Cargando dashboard...</div>\r\n  }\r\n\r\n  return (\r\n    <div className={styles[\"admin-dashboard\"]}>\r\n      <div className={styles[\"admin-header\"]}>\r\n        <h1>Panel de Administraci贸n</h1>\r\n        <p>Bienvenido, {user?.username || \"Admin\"}</p>\r\n      </div>\r\n\r\n      <div className={styles[\"stats-grid\"]}>\r\n        <div className={styles[\"stat-card\"]}>\r\n          <h3>Usuarios Totales</h3>\r\n          <div className={styles[\"stat-number\"]}>{stats?.users?.total_users || 0}</div>\r\n          <div className={styles[\"stat-subtitle\"]}>+{stats?.users?.new_users_month || 0} este mes</div>\r\n        </div>\r\n\r\n        <div className={styles[\"stat-card\"]}>\r\n          <h3>Publicaciones Totales</h3>\r\n          <div className={styles[\"stat-number\"]}>{stats?.posts?.total_posts || 0}</div>\r\n          <div className={styles[\"stat-subtitle\"]}>+{stats?.posts?.new_posts_month || 0} este mes</div>\r\n        </div>\r\n\r\n        <div className={styles[\"stat-card\"]}>\r\n          <h3>Comentarios Totales</h3>\r\n          <div className={styles[\"stat-number\"]}>{stats?.comments?.total_comments || 0}</div>\r\n          <div className={styles[\"stat-subtitle\"]}>Total en la plataforma</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles[\"admin-actions\"]}>\r\n        <div className={styles[\"action-card\"]}>\r\n          <h3>Gesti贸n de Usuarios</h3>\r\n          <p>Administrar usuarios y eliminar cuentas</p>\r\n          <Link to=\"/admin/users\" className={styles[\"admin-btn\"]}>\r\n            Gestionar Usuarios\r\n          </Link>\r\n        </div>\r\n\r\n        <div className={styles[\"action-card\"]}>\r\n          <h3>Gesti贸n de Publicaciones</h3>\r\n          <p>Moderar y eliminar publicaciones</p>\r\n          <Link to=\"/admin/posts\" className={styles[\"admin-btn\"]}>\r\n            Gestionar Posts\r\n          </Link>\r\n        </div>\r\n\r\n        <div className={styles[\"action-card\"]}>\r\n          <h3>Gesti贸n de Comentarios</h3>\r\n          <p>Moderar y eliminar comentarios</p>\r\n          <Link to=\"/admin/comments\" className={styles[\"admin-btn\"]}>\r\n            Gestionar Comentarios\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AdminDashboard\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}