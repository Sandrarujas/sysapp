{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\34615\\\\Desktop\\\\TFC_sys\\\\ProyectoFinal_sys\\\\client\\\\src\\\\context\\\\AuthContext.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useState, useEffect, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  // Estados existentes\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // ✅ NUEVOS ESTADOS para notificaciones\n  const [notifications, setNotifications] = useState([]);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [notificationsLoading, setNotificationsLoading] = useState(false);\n\n  // ✅ NUEVOS ESTADOS para posts\n  const [posts, setPosts] = useState([]);\n\n  // ✅ FUNCIÓN fetchNotifications con useCallback para evitar el warning\n  const fetchNotifications = useCallback(async (limit = 5) => {\n    if (!user && !localStorage.getItem(\"token\")) return;\n    try {\n      setNotificationsLoading(true);\n      const res = await axios.get(`http://localhost:5000/api/notifications?limit=${limit}`);\n      setNotifications(res.data.notifications);\n      setUnreadCount(res.data.unreadCount);\n      return res.data;\n    } catch (error) {\n      console.error(\"Error al cargar notificaciones:\", error);\n    } finally {\n      setNotificationsLoading(false);\n    }\n  }, [user]); // ✅ Dependencia de user\n\n  useEffect(() => {\n    const checkLoggedIn = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n          const res = await axios.get(\"http://localhost:5000/api/auth/me\");\n          setUser(res.data);\n\n          // ✅ Cargar notificaciones al iniciar sesión\n          // No llamamos fetchNotifications aquí para evitar dependencias circulares\n        }\n      } catch (error) {\n        localStorage.removeItem(\"token\");\n        delete axios.defaults.headers.common[\"Authorization\"];\n      }\n      setLoading(false);\n    };\n    checkLoggedIn();\n  }, []);\n\n  // ✅ useEffect separado para cargar notificaciones cuando el usuario cambie\n  useEffect(() => {\n    if (user) {\n      fetchNotifications();\n    }\n  }, [user, fetchNotifications]);\n\n  // ✅ POLLING automático para notificaciones cada 30 segundos\n  useEffect(() => {\n    if (!user) return;\n    const interval = setInterval(() => {\n      fetchNotifications();\n    }, 30000); // 30 segundos\n\n    return () => clearInterval(interval);\n  }, [user, fetchNotifications]); // ✅ Ahora incluye fetchNotifications\n\n  const login = async (email, password) => {\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/auth/login\", {\n        email,\n        password\n      });\n      localStorage.setItem(\"token\", res.data.token);\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`;\n      setUser(res.data.user);\n\n      // ✅ Las notificaciones se cargarán automáticamente por el useEffect\n\n      return true;\n    } catch (error) {\n      return false;\n    }\n  };\n  const register = async (username, email, password) => {\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/auth/register\", {\n        username,\n        email,\n        password\n      });\n      localStorage.setItem(\"token\", res.data.token);\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`;\n      setUser(res.data.user);\n\n      // ✅ Las notificaciones se cargarán automáticamente por el useEffect\n\n      return true;\n    } catch (error) {\n      return false;\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    delete axios.defaults.headers.common[\"Authorization\"];\n    setUser(null);\n\n    // ✅ Limpiar datos al cerrar sesión\n    setNotifications([]);\n    setUnreadCount(0);\n    setPosts([]);\n  };\n\n  // ✅ NUEVAS FUNCIONES para usuario\n  const updateUser = updatedData => {\n    setUser(prevUser => ({\n      ...prevUser,\n      ...updatedData\n    }));\n  };\n  const refreshUser = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      if (token) {\n        const res = await axios.get(\"http://localhost:5000/api/auth/me\");\n        setUser(res.data);\n        return res.data;\n      }\n    } catch (error) {\n      console.error(\"Error refreshing user:\", error);\n    }\n  };\n\n  // ✅ NUEVAS FUNCIONES para notificaciones\n  const markNotificationAsRead = async id => {\n    try {\n      await axios.put(`http://localhost:5000/api/notifications/${id}/read`);\n      setNotifications(prev => prev.map(notif => notif.id === id ? {\n        ...notif,\n        isRead: true\n      } : notif));\n      setUnreadCount(prev => prev > 0 ? prev - 1 : 0);\n    } catch (error) {\n      console.error(\"Error al marcar notificación:\", error);\n    }\n  };\n  const markAllNotificationsAsRead = async () => {\n    try {\n      await axios.put(\"http://localhost:5000/api/notifications/read-all\");\n      setNotifications(prev => prev.map(notif => ({\n        ...notif,\n        isRead: true\n      })));\n      setUnreadCount(0);\n    } catch (error) {\n      console.error(\"Error al marcar todas las notificaciones:\", error);\n    }\n  };\n\n  // ✅ NUEVAS FUNCIONES para posts\n  const updatePost = (postId, updatedData) => {\n    setPosts(prevPosts => prevPosts.map(post => post.id === postId ? {\n      ...post,\n      ...updatedData\n    } : post));\n  };\n  const deletePost = postId => {\n    setPosts(prevPosts => prevPosts.filter(post => post.id !== postId));\n  };\n  const addPost = newPost => {\n    setPosts(prevPosts => [newPost, ...prevPosts]);\n  };\n  const setAllPosts = newPosts => {\n    setPosts(newPosts);\n  };\n  const updatePostLikes = (postId, liked, likesCount) => {\n    setPosts(prevPosts => prevPosts.map(post => post.id === postId ? {\n      ...post,\n      liked,\n      likes: likesCount\n    } : post));\n  };\n  const updatePostComments = (postId, commentCount) => {\n    setPosts(prevPosts => prevPosts.map(post => post.id === postId ? {\n      ...post,\n      commentCount\n    } : post));\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      // Estados existentes\n      user,\n      loading,\n      // Funciones existentes\n      login,\n      register,\n      logout,\n      // ✅ NUEVAS funciones de usuario\n      updateUser,\n      refreshUser,\n      // ✅ NUEVOS estados y funciones de notificaciones\n      notifications,\n      unreadCount,\n      notificationsLoading,\n      fetchNotifications,\n      markNotificationAsRead,\n      markAllNotificationsAsRead,\n      // ✅ NUEVOS estados y funciones de posts\n      posts,\n      updatePost,\n      deletePost,\n      addPost,\n      setAllPosts,\n      updatePostLikes,\n      updatePostComments\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"tJjE9atK/RKAAespYV2VDk/r2RQ=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","createContext","useState","useEffect","useCallback","axios","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","user","setUser","loading","setLoading","notifications","setNotifications","unreadCount","setUnreadCount","notificationsLoading","setNotificationsLoading","posts","setPosts","fetchNotifications","limit","localStorage","getItem","res","get","data","error","console","checkLoggedIn","token","defaults","headers","common","removeItem","interval","setInterval","clearInterval","login","email","password","post","setItem","register","username","logout","updateUser","updatedData","prevUser","refreshUser","markNotificationAsRead","id","put","prev","map","notif","isRead","markAllNotificationsAsRead","updatePost","postId","prevPosts","deletePost","filter","addPost","newPost","setAllPosts","newPosts","updatePostLikes","liked","likesCount","likes","updatePostComments","commentCount","Provider","value","fileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/34615/Desktop/TFC_sys/ProyectoFinal_sys/client/src/context/AuthContext.jsx"],"sourcesContent":["\"use client\"\n\nimport { createContext, useState, useEffect, useCallback } from \"react\"\nimport axios from \"axios\"\n\nexport const AuthContext = createContext()\n\nexport const AuthProvider = ({ children }) => {\n  // Estados existentes\n  const [user, setUser] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  // ✅ NUEVOS ESTADOS para notificaciones\n  const [notifications, setNotifications] = useState([])\n  const [unreadCount, setUnreadCount] = useState(0)\n  const [notificationsLoading, setNotificationsLoading] = useState(false)\n\n  // ✅ NUEVOS ESTADOS para posts\n  const [posts, setPosts] = useState([])\n\n  // ✅ FUNCIÓN fetchNotifications con useCallback para evitar el warning\n  const fetchNotifications = useCallback(\n    async (limit = 5) => {\n      if (!user && !localStorage.getItem(\"token\")) return\n\n      try {\n        setNotificationsLoading(true)\n        const res = await axios.get(`http://localhost:5000/api/notifications?limit=${limit}`)\n        setNotifications(res.data.notifications)\n        setUnreadCount(res.data.unreadCount)\n        return res.data\n      } catch (error) {\n        console.error(\"Error al cargar notificaciones:\", error)\n      } finally {\n        setNotificationsLoading(false)\n      }\n    },\n    [user],\n  ) // ✅ Dependencia de user\n\n  useEffect(() => {\n    const checkLoggedIn = async () => {\n      try {\n        const token = localStorage.getItem(\"token\")\n        if (token) {\n          axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\n          const res = await axios.get(\"http://localhost:5000/api/auth/me\")\n          setUser(res.data)\n\n          // ✅ Cargar notificaciones al iniciar sesión\n          // No llamamos fetchNotifications aquí para evitar dependencias circulares\n        }\n      } catch (error) {\n        localStorage.removeItem(\"token\")\n        delete axios.defaults.headers.common[\"Authorization\"]\n      }\n      setLoading(false)\n    }\n\n    checkLoggedIn()\n  }, [])\n\n  // ✅ useEffect separado para cargar notificaciones cuando el usuario cambie\n  useEffect(() => {\n    if (user) {\n      fetchNotifications()\n    }\n  }, [user, fetchNotifications])\n\n  // ✅ POLLING automático para notificaciones cada 30 segundos\n  useEffect(() => {\n    if (!user) return\n\n    const interval = setInterval(() => {\n      fetchNotifications()\n    }, 30000) // 30 segundos\n\n    return () => clearInterval(interval)\n  }, [user, fetchNotifications]) // ✅ Ahora incluye fetchNotifications\n\n  const login = async (email, password) => {\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/auth/login\", {\n        email,\n        password,\n      })\n      localStorage.setItem(\"token\", res.data.token)\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`\n      setUser(res.data.user)\n\n      // ✅ Las notificaciones se cargarán automáticamente por el useEffect\n\n      return true\n    } catch (error) {\n      return false\n    }\n  }\n\n  const register = async (username, email, password) => {\n    try {\n      const res = await axios.post(\"http://localhost:5000/api/auth/register\", {\n        username,\n        email,\n        password,\n      })\n      localStorage.setItem(\"token\", res.data.token)\n      axios.defaults.headers.common[\"Authorization\"] = `Bearer ${res.data.token}`\n      setUser(res.data.user)\n\n      // ✅ Las notificaciones se cargarán automáticamente por el useEffect\n\n      return true\n    } catch (error) {\n      return false\n    }\n  }\n\n  const logout = () => {\n    localStorage.removeItem(\"token\")\n    delete axios.defaults.headers.common[\"Authorization\"]\n    setUser(null)\n\n    // ✅ Limpiar datos al cerrar sesión\n    setNotifications([])\n    setUnreadCount(0)\n    setPosts([])\n  }\n\n  // ✅ NUEVAS FUNCIONES para usuario\n  const updateUser = (updatedData) => {\n    setUser((prevUser) => ({\n      ...prevUser,\n      ...updatedData,\n    }))\n  }\n\n  const refreshUser = async () => {\n    try {\n      const token = localStorage.getItem(\"token\")\n      if (token) {\n        const res = await axios.get(\"http://localhost:5000/api/auth/me\")\n        setUser(res.data)\n        return res.data\n      }\n    } catch (error) {\n      console.error(\"Error refreshing user:\", error)\n    }\n  }\n\n  // ✅ NUEVAS FUNCIONES para notificaciones\n  const markNotificationAsRead = async (id) => {\n    try {\n      await axios.put(`http://localhost:5000/api/notifications/${id}/read`)\n\n      setNotifications((prev) => prev.map((notif) => (notif.id === id ? { ...notif, isRead: true } : notif)))\n\n      setUnreadCount((prev) => (prev > 0 ? prev - 1 : 0))\n    } catch (error) {\n      console.error(\"Error al marcar notificación:\", error)\n    }\n  }\n\n  const markAllNotificationsAsRead = async () => {\n    try {\n      await axios.put(\"http://localhost:5000/api/notifications/read-all\")\n\n      setNotifications((prev) => prev.map((notif) => ({ ...notif, isRead: true })))\n\n      setUnreadCount(0)\n    } catch (error) {\n      console.error(\"Error al marcar todas las notificaciones:\", error)\n    }\n  }\n\n  // ✅ NUEVAS FUNCIONES para posts\n  const updatePost = (postId, updatedData) => {\n    setPosts((prevPosts) => prevPosts.map((post) => (post.id === postId ? { ...post, ...updatedData } : post)))\n  }\n\n  const deletePost = (postId) => {\n    setPosts((prevPosts) => prevPosts.filter((post) => post.id !== postId))\n  }\n\n  const addPost = (newPost) => {\n    setPosts((prevPosts) => [newPost, ...prevPosts])\n  }\n\n  const setAllPosts = (newPosts) => {\n    setPosts(newPosts)\n  }\n\n  const updatePostLikes = (postId, liked, likesCount) => {\n    setPosts((prevPosts) =>\n      prevPosts.map((post) => (post.id === postId ? { ...post, liked, likes: likesCount } : post)),\n    )\n  }\n\n  const updatePostComments = (postId, commentCount) => {\n    setPosts((prevPosts) => prevPosts.map((post) => (post.id === postId ? { ...post, commentCount } : post)))\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        // Estados existentes\n        user,\n        loading,\n\n        // Funciones existentes\n        login,\n        register,\n        logout,\n\n        // ✅ NUEVAS funciones de usuario\n        updateUser,\n        refreshUser,\n\n        // ✅ NUEVOS estados y funciones de notificaciones\n        notifications,\n        unreadCount,\n        notificationsLoading,\n        fetchNotifications,\n        markNotificationAsRead,\n        markAllNotificationsAsRead,\n\n        // ✅ NUEVOS estados y funciones de posts\n        posts,\n        updatePost,\n        deletePost,\n        addPost,\n        setAllPosts,\n        updatePostLikes,\n        updatePostComments,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}