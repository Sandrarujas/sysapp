{"ast":null,"code":"\"use client\";import{useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import{AuthContext}from\"../context/AuthContext\";import CommentList from\"./CommentList\";import EditPostModal from\"./EditPostModal\";import styles from\"../styles/Post.module.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Post=_ref=>{var _post$comments;let{post,onPostUpdate,onPostDelete}=_ref;// ✅ Usar AuthContext para todo\nconst{user,updatePost,deletePost:deletePostFromContext,updatePostLikes,updatePostComments}=useContext(AuthContext);const[likes,setLikes]=useState(post.likes||0);const[liked,setLiked]=useState(post.liked||false);const[showComments,setShowComments]=useState(false);const[commentText,setCommentText]=useState(\"\");const[comments,setComments]=useState(post.comments||[]);const[commentCount,setCommentCount]=useState(post.commentCount||((_post$comments=post.comments)===null||_post$comments===void 0?void 0:_post$comments.length)||0);const[loadingComments,setLoadingComments]=useState(false);const[allCommentsLoaded,setAllCommentsLoaded]=useState(false);const[imageError,setImageError]=useState(false);const[isEditModalOpen,setIsEditModalOpen]=useState(false);const[isDeleting,setIsDeleting]=useState(false);const[showOptions,setShowOptions]=useState(false);const isOwner=user&&post.user&&user.id===post.user.id;const getImageUrl=imagePath=>{if(!imagePath)return null;if(imagePath.startsWith(\"http\"))return imagePath;return`http://localhost:5000${imagePath}`;};const handleLike=async()=>{try{await axios.post(`http://localhost:5000/api/posts/${post.id}/like`);const newLiked=!liked;const newLikes=liked?likes-1:likes+1;// ✅ Actualizar estado local inmediatamente\nsetLiked(newLiked);setLikes(newLikes);// ✅ Actualizar contexto global\nupdatePostLikes(post.id,newLiked,newLikes);}catch(error){console.error(\"Error liking post:\",error);// Revertir cambios en caso de error\nsetLiked(liked);setLikes(likes);}};const handleComment=async e=>{e.preventDefault();if(!commentText.trim())return;try{const res=await axios.post(`http://localhost:5000/api/posts/${post.id}/comment`,{content:commentText});const newCommentCount=commentCount+1;// ✅ Actualizar estado local\nsetComments([res.data,...comments]);setCommentCount(newCommentCount);setCommentText(\"\");// ✅ Actualizar contexto global\nupdatePostComments(post.id,newCommentCount);}catch(error){console.error(\"Error commenting on post:\",error);}};const toggleComments=async()=>{setShowComments(!showComments);if(showComments)return;if(comments.length===0&&!showComments){try{setLoadingComments(true);const res=await axios.get(`http://localhost:5000/api/posts/${post.id}/comments?limit=5`);setComments(res.data.comments);setAllCommentsLoaded(res.data.comments.length>=res.data.pagination.total);setLoadingComments(false);}catch(error){console.error(\"Error loading comments:\",error);setLoadingComments(false);}}};const loadMoreComments=async()=>{try{setLoadingComments(true);const page=Math.floor(comments.length/5)+1;const res=await axios.get(`http://localhost:5000/api/posts/${post.id}/comments?page=${page}&limit=5`);setComments([...comments,...res.data.comments]);setAllCommentsLoaded(comments.length+res.data.comments.length>=res.data.pagination.total);setLoadingComments(false);}catch(error){console.error(\"Error loading more comments:\",error);setLoadingComments(false);}};const handleImageError=()=>{console.error(\"Error al cargar la imagen:\",post.image);setImageError(true);};const handleEditPost=()=>{setIsEditModalOpen(true);setShowOptions(false);};const handleDeletePost=async()=>{if(window.confirm(\"¿Estás seguro de que quieres eliminar esta publicación?\")){try{setIsDeleting(true);await axios.delete(`http://localhost:5000/api/posts/${post.id}`);// ✅ Actualizar contexto global inmediatamente\ndeletePostFromContext(post.id);// ✅ Notificar al componente padre\nif(onPostDelete){onPostDelete(post.id);}}catch(error){console.error(\"Error al eliminar publicación:\",error);alert(\"Error al eliminar la publicación\");}finally{setIsDeleting(false);}}};const handlePostUpdate=updatedPost=>{// ✅ Actualizar estado local\nsetImageError(false);// ✅ Actualizar contexto global\nupdatePost(post.id,updatedPost);// ✅ Notificar al componente padre\nif(onPostUpdate){onPostUpdate(updatedPost);}};const toggleOptions=()=>{setShowOptions(!showOptions);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.post,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-header\"],children:[/*#__PURE__*/_jsxs(Link,{to:`/profile/${post.user.username}`,className:styles[\"post-user\"],children:[/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(post.user.profileImage)||\"/placeholder.svg?height=40&width=40\",alt:post.user.username,className:styles[\"post-user-image\"],onError:e=>{e.target.src=\"/placeholder.svg?height=40&width=40\";}}),/*#__PURE__*/_jsx(\"span\",{className:styles[\"post-username\"],children:post.user.username})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-header-right\"],children:[/*#__PURE__*/_jsx(\"span\",{className:styles[\"post-date\"],children:new Date(post.createdAt).toLocaleDateString()}),isOwner&&/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-options\"],children:[/*#__PURE__*/_jsx(\"button\",{className:styles[\"post-options-button\"],onClick:toggleOptions,children:\"\\u22EE\"}),showOptions&&/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-options-menu\"],children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleEditPost,disabled:isDeleting,children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeletePost,disabled:isDeleting,children:isDeleting?\"Eliminando...\":\"Eliminar\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-content\"],children:[/*#__PURE__*/_jsx(\"p\",{children:post.content}),post.image&&!imageError&&/*#__PURE__*/_jsx(\"div\",{className:styles[\"post-image-container\"],children:/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(post.image)||\"/placeholder.svg\",alt:\"Post\",className:styles[\"post-image\"],onError:handleImageError})}),imageError&&/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-image-error\"],children:[/*#__PURE__*/_jsx(\"p\",{children:\"No se pudo cargar la imagen\"}),/*#__PURE__*/_jsxs(\"p\",{className:styles[\"post-image-path\"],children:[\"Ruta: \",post.image]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-actions\"],children:[/*#__PURE__*/_jsxs(\"button\",{className:`${styles[\"post-like-button\"]} ${liked?styles.liked:\"\"}`,onClick:handleLike,children:[liked?\"❤️\":\"🤍\",\" \",likes]}),/*#__PURE__*/_jsxs(\"button\",{className:styles[\"post-comment-button\"],onClick:toggleComments,children:[\"\\uD83D\\uDCAC \",commentCount]})]}),showComments&&/*#__PURE__*/_jsxs(\"div\",{className:styles[\"post-comments\"],children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleComment,className:styles[\"comment-form\"],children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Escribe un comentario...\",value:commentText,onChange:e=>setCommentText(e.target.value),className:styles[\"comment-input\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles[\"comment-submit\"],children:\"Enviar\"})]}),loadingComments&&comments.length===0?/*#__PURE__*/_jsx(\"div\",{className:styles.loading,children:\"Cargando comentarios...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CommentList,{comments:comments}),!allCommentsLoaded&&commentCount>comments.length&&/*#__PURE__*/_jsx(\"div\",{className:styles[\"view-all-comments\"],children:/*#__PURE__*/_jsx(\"button\",{className:styles[\"view-all-comments-button\"],onClick:loadMoreComments,disabled:loadingComments,children:loadingComments?\"Cargando...\":`Ver más comentarios (${commentCount-comments.length} restantes)`})})]})]}),isEditModalOpen&&/*#__PURE__*/_jsx(EditPostModal,{isOpen:isEditModalOpen,onClose:()=>setIsEditModalOpen(false),post:post,onPostUpdate:handlePostUpdate})]});};export default Post;","map":{"version":3,"names":["useState","useContext","Link","axios","AuthContext","CommentList","EditPostModal","styles","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Post","_ref","_post$comments","post","onPostUpdate","onPostDelete","user","updatePost","deletePost","deletePostFromContext","updatePostLikes","updatePostComments","likes","setLikes","liked","setLiked","showComments","setShowComments","commentText","setCommentText","comments","setComments","commentCount","setCommentCount","length","loadingComments","setLoadingComments","allCommentsLoaded","setAllCommentsLoaded","imageError","setImageError","isEditModalOpen","setIsEditModalOpen","isDeleting","setIsDeleting","showOptions","setShowOptions","isOwner","id","getImageUrl","imagePath","startsWith","handleLike","newLiked","newLikes","error","console","handleComment","e","preventDefault","trim","res","content","newCommentCount","data","toggleComments","get","pagination","total","loadMoreComments","page","Math","floor","handleImageError","image","handleEditPost","handleDeletePost","window","confirm","delete","alert","handlePostUpdate","updatedPost","toggleOptions","className","children","to","username","src","profileImage","alt","onError","target","Date","createdAt","toLocaleDateString","onClick","disabled","onSubmit","type","placeholder","value","onChange","loading","isOpen","onClose"],"sources":["C:/Users/34615/Desktop/TFC_sys/ProyectoFinal_sys/client/src/components/Post.jsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useContext } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport axios from \"axios\"\nimport { AuthContext } from \"../context/AuthContext\"\nimport CommentList from \"./CommentList\"\nimport EditPostModal from \"./EditPostModal\"\nimport styles from \"../styles/Post.module.css\" \n\nconst Post = ({ post, onPostUpdate, onPostDelete }) => {\n  // ✅ Usar AuthContext para todo\n  const {\n    user,\n    updatePost,\n    deletePost: deletePostFromContext,\n    updatePostLikes,\n    updatePostComments,\n  } = useContext(AuthContext)\n\n  const [likes, setLikes] = useState(post.likes || 0)\n  const [liked, setLiked] = useState(post.liked || false)\n  const [showComments, setShowComments] = useState(false)\n  const [commentText, setCommentText] = useState(\"\")\n  const [comments, setComments] = useState(post.comments || [])\n  const [commentCount, setCommentCount] = useState(post.commentCount || post.comments?.length || 0)\n  const [loadingComments, setLoadingComments] = useState(false)\n  const [allCommentsLoaded, setAllCommentsLoaded] = useState(false)\n  const [imageError, setImageError] = useState(false)\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [showOptions, setShowOptions] = useState(false)\n\n  const isOwner = user && post.user && user.id === post.user.id\n\n  const getImageUrl = (imagePath) => {\n    if (!imagePath) return null\n    if (imagePath.startsWith(\"http\")) return imagePath\n    return `http://localhost:5000${imagePath}`\n  }\n\n  const handleLike = async () => {\n    try {\n      await axios.post(`http://localhost:5000/api/posts/${post.id}/like`)\n      const newLiked = !liked\n      const newLikes = liked ? likes - 1 : likes + 1\n\n      // ✅ Actualizar estado local inmediatamente\n      setLiked(newLiked)\n      setLikes(newLikes)\n\n      // ✅ Actualizar contexto global\n      updatePostLikes(post.id, newLiked, newLikes)\n    } catch (error) {\n      console.error(\"Error liking post:\", error)\n      // Revertir cambios en caso de error\n      setLiked(liked)\n      setLikes(likes)\n    }\n  }\n\n  const handleComment = async (e) => {\n    e.preventDefault()\n    if (!commentText.trim()) return\n\n    try {\n      const res = await axios.post(`http://localhost:5000/api/posts/${post.id}/comment`, {\n        content: commentText,\n      })\n\n      const newCommentCount = commentCount + 1\n\n      // ✅ Actualizar estado local\n      setComments([res.data, ...comments])\n      setCommentCount(newCommentCount)\n      setCommentText(\"\")\n\n      // ✅ Actualizar contexto global\n      updatePostComments(post.id, newCommentCount)\n    } catch (error) {\n      console.error(\"Error commenting on post:\", error)\n    }\n  }\n\n  const toggleComments = async () => {\n    setShowComments(!showComments)\n\n    if (showComments) return\n\n    if (comments.length === 0 && !showComments) {\n      try {\n        setLoadingComments(true)\n        const res = await axios.get(`http://localhost:5000/api/posts/${post.id}/comments?limit=5`)\n        setComments(res.data.comments)\n        setAllCommentsLoaded(res.data.comments.length >= res.data.pagination.total)\n        setLoadingComments(false)\n      } catch (error) {\n        console.error(\"Error loading comments:\", error)\n        setLoadingComments(false)\n      }\n    }\n  }\n\n  const loadMoreComments = async () => {\n    try {\n      setLoadingComments(true)\n      const page = Math.floor(comments.length / 5) + 1\n      const res = await axios.get(`http://localhost:5000/api/posts/${post.id}/comments?page=${page}&limit=5`)\n\n      setComments([...comments, ...res.data.comments])\n      setAllCommentsLoaded(comments.length + res.data.comments.length >= res.data.pagination.total)\n      setLoadingComments(false)\n    } catch (error) {\n      console.error(\"Error loading more comments:\", error)\n      setLoadingComments(false)\n    }\n  }\n\n  const handleImageError = () => {\n    console.error(\"Error al cargar la imagen:\", post.image)\n    setImageError(true)\n  }\n\n  const handleEditPost = () => {\n    setIsEditModalOpen(true)\n    setShowOptions(false)\n  }\n\n  const handleDeletePost = async () => {\n    if (window.confirm(\"¿Estás seguro de que quieres eliminar esta publicación?\")) {\n      try {\n        setIsDeleting(true)\n        await axios.delete(`http://localhost:5000/api/posts/${post.id}`)\n\n        // ✅ Actualizar contexto global inmediatamente\n        deletePostFromContext(post.id)\n\n        // ✅ Notificar al componente padre\n        if (onPostDelete) {\n          onPostDelete(post.id)\n        }\n      } catch (error) {\n        console.error(\"Error al eliminar publicación:\", error)\n        alert(\"Error al eliminar la publicación\")\n      } finally {\n        setIsDeleting(false)\n      }\n    }\n  }\n\n  const handlePostUpdate = (updatedPost) => {\n    // ✅ Actualizar estado local\n    setImageError(false)\n\n    // ✅ Actualizar contexto global\n    updatePost(post.id, updatedPost)\n\n    // ✅ Notificar al componente padre\n    if (onPostUpdate) {\n      onPostUpdate(updatedPost)\n    }\n  }\n\n  const toggleOptions = () => {\n    setShowOptions(!showOptions)\n  }\n\n  return (\n    <div className={styles.post}>\n      <div className={styles[\"post-header\"]}>\n        <Link to={`/profile/${post.user.username}`} className={styles[\"post-user\"]}>\n          <img\n            src={getImageUrl(post.user.profileImage) || \"/placeholder.svg?height=40&width=40\"}\n            alt={post.user.username}\n            className={styles[\"post-user-image\"]}\n            onError={(e) => {\n              e.target.src = \"/placeholder.svg?height=40&width=40\"\n            }}\n          />\n          <span className={styles[\"post-username\"]}>{post.user.username}</span>\n        </Link>\n        <div className={styles[\"post-header-right\"]}>\n          <span className={styles[\"post-date\"]}>{new Date(post.createdAt).toLocaleDateString()}</span>\n\n          {isOwner && (\n            <div className={styles[\"post-options\"]}>\n              <button className={styles[\"post-options-button\"]} onClick={toggleOptions}>\n                ⋮\n              </button>\n              {showOptions && (\n                <div className={styles[\"post-options-menu\"]}>\n                  <button onClick={handleEditPost} disabled={isDeleting}>\n                    Editar\n                  </button>\n                  <button onClick={handleDeletePost} disabled={isDeleting}>\n                    {isDeleting ? \"Eliminando...\" : \"Eliminar\"}\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      <div className={styles[\"post-content\"]}>\n        <p>{post.content}</p>\n        {post.image && !imageError && (\n          <div className={styles[\"post-image-container\"]}>\n            <img\n              src={getImageUrl(post.image) || \"/placeholder.svg\"}\n              alt=\"Post\"\n              className={styles[\"post-image\"]}\n              onError={handleImageError}\n            />\n          </div>\n        )}\n        {imageError && (\n          <div className={styles[\"post-image-error\"]}>\n            <p>No se pudo cargar la imagen</p>\n            <p className={styles[\"post-image-path\"]}>Ruta: {post.image}</p>\n          </div>\n        )}\n      </div>\n      <div className={styles[\"post-actions\"]}>\n        <button className={`${styles[\"post-like-button\"]} ${liked ? styles.liked : \"\"}`} onClick={handleLike}>\n          {liked ? \"❤️\" : \"🤍\"} {likes}\n        </button>\n        <button className={styles[\"post-comment-button\"]} onClick={toggleComments}>\n          💬 {commentCount}\n        </button>\n      </div>\n      {showComments && (\n        <div className={styles[\"post-comments\"]}>\n          <form onSubmit={handleComment} className={styles[\"comment-form\"]}>\n            <input\n              type=\"text\"\n              placeholder=\"Escribe un comentario...\"\n              value={commentText}\n              onChange={(e) => setCommentText(e.target.value)}\n              className={styles[\"comment-input\"]}\n            />\n            <button type=\"submit\" className={styles[\"comment-submit\"]}>\n              Enviar\n            </button>\n          </form>\n\n          {loadingComments && comments.length === 0 ? (\n            <div className={styles.loading}>Cargando comentarios...</div>\n          ) : (\n            <>\n              <CommentList comments={comments} />\n\n              {!allCommentsLoaded && commentCount > comments.length && (\n                <div className={styles[\"view-all-comments\"]}>\n                  <button className={styles[\"view-all-comments-button\"]} onClick={loadMoreComments} disabled={loadingComments}>\n                    {loadingComments\n                      ? \"Cargando...\"\n                      : `Ver más comentarios (${commentCount - comments.length} restantes)`}\n                  </button>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      )}\n\n      {isEditModalOpen && (\n        <EditPostModal\n          isOpen={isEditModalOpen}\n          onClose={() => setIsEditModalOpen(false)}\n          post={post}\n          onPostUpdate={handlePostUpdate}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default Post\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}